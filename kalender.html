<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalender - OPSUCHT Team</title>
  <link rel="stylesheet" href="style.css">
  <link rel="icon" href="favicon.ico">
  <style>
    body {
      background: url("background_kalender.png") center / cover no-repeat;
    }
  </style>
</head>
<body>

<!-- LOGIN-SEITE (wird angezeigt wenn nicht eingeloggt) -->
<div id="loginPage" class="login-overlay" style="display: none;">
  <div class="login-overlay-content">
    <img src="logo.png" alt="Logo" class="login-logo">
    <h2>ğŸ” Anmeldung erforderlich</h2>
    <p>Du musst angemeldet sein, um auf den Team Kalender zugreifen zu kÃ¶nnen.</p>
    <button onclick="window.location.href='login.html'" class="login-btn">
      Zum Login
    </button>
  </div>
</div>

<!-- HAUPTINHALT (wird angezeigt wenn eingeloggt) -->
<div id="mainContent" style="display: none;">

<!-- =========================
     NAVIGATION
========================= -->
<nav class="nav">
  <div class="nav-user" id="navUser" style="display:none;">
    <img id="navAvatar" src="" alt="MC Kopf">
    <span id="navUsername"></span>
    <button id="logoutBtn" class="logout-btn" title="Ausloggen">ğŸšª</button>
  </div>

  <div class="nav-links">
    <a href="index.html">Startseite</a>
    <a href="items.html">Inventar</a>
    <a href="lager.html">Lager</a>
    <a href="kalender.html" class="active">Kalender</a>
    <a href="kredite.html">Kredit</a>
    <a href="strafkatalog.html">Strafkatalog</a>
    <a href="regeln.html">Regelwerk</a>
  </div>

  <div class="nav-server-status" id="navServerStatus">
    <div class="server-status-indicator" id="serverStatusIndicator">
      <span class="server-status-icon" id="serverStatusIcon">ğŸŸ¢</span>
      <span class="server-status-text" id="serverStatusText">LÃ¤dt...</span>
    </div>
    <div class="server-player-count" id="serverPlayerCount">
      <span class="server-count-icon">ğŸ‘¥</span>
      <span class="server-count-text" id="serverCountText">0</span>
      <span class="server-count-label">Online</span>
    </div>
  </div>
</nav>

<!-- =========================
     PAGE
========================= -->
<div class="page-box kalender-page">

  <!-- LOGO -->
  <div class="logo-top">
    <img src="logo.png" alt="Logo">
  </div>

  <!-- =========================
       KALENDER HEADER
  ========================= -->
  <div class="kalender-header">
    <div class="kalender-title">
      <h2>ğŸ“… Team Kalender</h2>
      <p class="kalender-subtitle">Mehrere Spieler pro Tag mÃ¶glich</p>
    </div>
    
    <div class="kalender-controls">
      <button id="prevMonth" class="kalender-btn">â—€</button>
      <div class="kalender-current-month" id="currentMonth">Januar 2024</div>
      <button id="nextMonth" class="kalender-btn">â–¶</button>
    </div>
  </div>

  <!-- =========================
       KALENDER GRID
  ========================= -->
  <div class="kalender-container">
    <div class="kalender-weekdays">
      <div class="weekday">Mo</div>
      <div class="weekday">Di</div>
      <div class="weekday">Mi</div>
      <div class="weekday">Do</div>
      <div class="weekday">Fr</div>
      <div class="weekday">Sa</div>
      <div class="weekday">So</div>
    </div>
    
    <div class="kalender-grid" id="kalenderGrid">
      <!-- Kalender-Tage werden per JavaScript generiert -->
    </div>
  </div>

  <!-- =========================
       SPIELER-AUSWAHL MODAL
  ========================= -->
  <div id="playerModal" class="modal-overlay" style="display: none;">
    <div class="modal-content kalender-modal">
      <div class="modal-header">
        <h3 id="modalTitle">1. Dezember 2024</h3>
        <button id="closeModal" class="modal-close">Ã—</button>
      </div>
      
      <div class="modal-body">
        <p class="modal-subtitle">WÃ¤hle Spieler fÃ¼r diesen Tag:</p>
        
        <div class="player-grid" id="playerGrid">
          <!-- Spieler werden per JavaScript geladen -->
        </div>
        
        <div class="selected-players-section">
          <h4>ğŸ‘¥ AusgewÃ¤hlte Spieler:</h4>
          <div class="selected-players-list" id="selectedPlayersList">
            <!-- AusgewÃ¤hlte Spieler werden hier angezeigt -->
          </div>
        </div>
        
        <div class="note-section">
          <label for="dayNote" class="note-label">ğŸ“ Notiz (optional):</label>
          <textarea id="dayNote" class="note-input" placeholder="Notiz fÃ¼r diesen Tag eintragen..." rows="3"></textarea>
        </div>
        
        <div class="modal-actions">
          <button id="savePlayers" class="btn-primary">Speichern</button>
          <button id="removePlayer" class="btn-secondary">Spieler entfernen</button>
          <button id="cancelModal" class="btn-cancel">Abbrechen</button>
        </div>
      </div>
    </div>
  </div>

</div><!-- Ende von mainContent -->

<!-- =========================
     SCRIPTS
========================= -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="supabase.js"></script>
<script src="notifications.js"></script>
<script src="logout.js"></script>
<script src="script-kalender.js"></script>

</body>
</html>
